

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>构建要使用的数据集:让我们看看数据库中的前1000部电影 &mdash; DeepLearning 1.0 文档</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="索引"
              href="../genindex.html"/>
        <link rel="search" title="搜索" href="../search.html"/>
    <link rel="top" title="DeepLearning 1.0 文档" href="../index.html"/>
        <link rel="up" title="第四章" href="index.html"/>
        <link rel="next" title="第五章" href="../section_5/index.html"/>
        <link rel="prev" title="第四章" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> DeepLearning
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">目录:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../section_1/index.html">第一章</a></li>
<li class="toctree-l1"><a class="reference internal" href="../section_2/index.html">第二章</a></li>
<li class="toctree-l1"><a class="reference internal" href="../section_3/index.html">第三章</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">第四章</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">构建要使用的数据集:让我们看看数据库中的前1000部电影</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">结对分析电影类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">深入探索同时出现的类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">有趣的问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tmdb">基于这个新的数据集，我们现在可以从TMDB抓取海报来作为我们的训练数据了！</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">基于离散信息建立数据集！</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">我的实现</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">我们如何在矩阵中存储电影概述？</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../section_5/index.html">第五章</a></li>
<li class="toctree-l1"><a class="reference internal" href="../section_6/index.html">第六章</a></li>
<li class="toctree-l1"><a class="reference internal" href="../section_7/index.html">第七章</a></li>
<li class="toctree-l1"><a class="reference internal" href="../section_8/index.html">第八章</a></li>
<li class="toctree-l1"><a class="reference internal" href="../section_9/index.html">第九章</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DeepLearning</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">第四章</a> &raquo;</li>
        
      <li>构建要使用的数据集:让我们看看数据库中的前1000部电影</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/section_4/get_movies.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>构建要使用的数据集:让我们看看数据库中的前1000部电影<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<p>使用前面的API我们只获取前50个页面。如前文所说，可以使用 top_movies=all_movies.popular() 的”page”参数实现。</p>
<p>注意：下面的一些代码会在名为 “pickle” 的python文件中存储一些数据用来被内存访问，而不是每次都重新下载。一旦完成，你应该注释掉这些会产生新对象的代码并不再使用。</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">all_movies</span><span class="o">=</span><span class="n">tmdb</span><span class="o">.</span><span class="n">Movies</span><span class="p">()</span>
<span class="n">top_movies</span><span class="o">=</span><span class="n">all_movies</span><span class="o">.</span><span class="n">popular</span><span class="p">()</span>

<span class="nb">len</span><span class="p">(</span><span class="n">top_movies</span><span class="p">[</span><span class="s1">&#39;results&#39;</span><span class="p">])</span>
<span class="n">top20_movs</span><span class="o">=</span><span class="n">top_movies</span><span class="p">[</span><span class="s1">&#39;results&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span class="c1"># 当数据保存到pickle文件后请注释掉这段代码</span>
<span class="n">all_movies</span><span class="o">=</span><span class="n">tmdb</span><span class="o">.</span><span class="n">Movies</span><span class="p">()</span>
<span class="n">top1000_movies</span><span class="o">=</span><span class="p">[]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Pulling movie list, Please wait...&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">51</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">i</span><span class="o">%</span><span class="mi">15</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
    <span class="n">movies_on_this_page</span><span class="o">=</span><span class="n">all_movies</span><span class="o">.</span><span class="n">popular</span><span class="p">(</span><span class="n">page</span><span class="o">=</span><span class="n">i</span><span class="p">)[</span><span class="s1">&#39;results&#39;</span><span class="p">]</span>
    <span class="n">top1000_movies</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">movies_on_this_page</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">top1000_movies</span><span class="p">)</span>
<span class="n">f3</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;movie_list.pckl&#39;</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span>
<span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">top1000_movies</span><span class="p">,</span><span class="n">f3</span><span class="p">)</span>
<span class="n">f3</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span class="n">f3</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;movie_list.pckl&#39;</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
<span class="n">top1000_movies</span><span class="o">=</span><span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f3</span><span class="p">)</span>
<span class="n">f3</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="id2">
<h2>结对分析电影类型<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>由于我们的数据集是多标签的，仅仅只是关注类型分类是不充分的。观察哪些类型同时出现可能是有益的，因为它可能有助于揭示我们数据集中的固有偏见。例如，如果浪漫和喜剧比纪录片和喜剧更经常地出现在一起，那是有意义的。这种固有的偏见告诉我们，我们从自身抽样的潜在人群是不平衡的。然后我们可以采取步骤来考虑这些问题。即使我们不采取这些步骤，重要的是要意识到我们所做的假设是不平衡的数据集不会损害我们的性能，如果需要，我们可以回过头来修正这个假设。古老但有用的科学方法，不是吗?</p>
<p>所以对于前1000部电影，我们来做一些类型分布的结对分析。我们的主要目的是看哪些类型的电影出现在同一部电影中。因此，我们首先定义一个函数，它取一个列表，并从中生成所有可能的对。然后，我们提取电影的类型列表，并在类型列表上运行这个函数，以获得所有同时出现的类型对。</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c1"># 此方法生成所有可能的电影组合</span>
<span class="k">def</span> <span class="nf">list2pairs</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
    <span class="c1"># itertools.combinations(l,2) 从列表l中生成长度为2的组合</span>
    <span class="n">pairs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
    <span class="c1"># 然后是长度为1的组合，重复的组合不会被itertools计算</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
        <span class="n">pairs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">pairs</span>
</pre></div>
</div>
<p>如我所说，现在我们要抓取每部电影的类型数据，然后使用上面的方法计算两种类型同时出现的概率</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c1"># get all genre lists pairs from all movies</span>
<span class="n">allPairs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">movie</span> <span class="ow">in</span> <span class="n">top1000_movies</span><span class="p">:</span>
    <span class="n">allPairs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">list2pairs</span><span class="p">(</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;genre_ids&#39;</span><span class="p">]))</span>

<span class="n">nr_ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">allPairs</span><span class="p">)</span>
<span class="n">visGrid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">nr_ids</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">nr_ids</span><span class="p">)))</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">allPairs</span><span class="p">:</span>
    <span class="n">visGrid</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">argwhere</span><span class="p">(</span><span class="n">nr_ids</span><span class="o">==</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">argwhere</span><span class="p">(</span><span class="n">nr_ids</span><span class="o">==</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span><span class="o">+=</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">visGrid</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">argwhere</span><span class="p">(</span><span class="n">nr_ids</span><span class="o">==</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">argwhere</span><span class="p">(</span><span class="n">nr_ids</span><span class="o">==</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span><span class="o">+=</span><span class="mi">1</span>
</pre></div>
</div>
<p>让我们看看刚刚新建的数据结构。这是一个如下所示的19X19的结构。也就是说我们有19中类型，不用说，这种结构计算了同一部电影中同时出现的类型的数量。</p>
<div class="highlight-default"><div class="highlight"><pre><span class="nb">print</span> <span class="n">visGrid</span><span class="o">.</span><span class="n">shape</span>
<span class="nb">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">Genre_ID_to_name</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

<span class="p">(</span><span class="mi">19</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span>
<span class="mi">19</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span class="n">annot_lookup</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nr_ids</span><span class="p">)):</span>
    <span class="n">annot_lookup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Genre_ID_to_name</span><span class="p">[</span><span class="n">nr_ids</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>

<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">visGrid</span><span class="p">,</span> <span class="n">xticklabels</span><span class="o">=</span><span class="n">annot_lookup</span><span class="p">,</span> <span class="n">yticklabels</span><span class="o">=</span><span class="n">annot_lookup</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/19genres.png" src="../_images/19genres.png" />
<p>上图以热力图的形式展现了经常同时出现的类型的分布</p>
<p>在上面的图中需要注意的重要一点是对角线。对角线对应的是自我对应，即一个类型出现的次数，例如戏剧与戏剧一起出现的次数。这基本上可以认为是一种类型发生的总次数的计数!</p>
<p>我们也可以看到许多数据集中在戏剧类型上，当然这也是一个很通用的类型标签。几乎没有纪录片或者是电视电影出现。恐怖片是一个非常独特的类别，浪漫类型也不是分布很广。</p>
<p>为了了解这些数据不均匀的原因，我们可以尝试多种方式来探索可能发现的一些有趣关系。</p>
</div>
<div class="section" id="id3">
<h2>深入探索同时出现的类型<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<p>我们现在要做的是寻找一些同时出现类型的最佳集合，并看看逻辑上对我们是否有用？直观来说，看到上图呈现出正方形聚集不会太意外–大多数分布在正方形区域也就是说某些类型总是同时出现而与其他类型却很少交互。某种意义上说，这将凸显并区分出哪些类型同时出现而哪些不是。</p>
<p>尽管这些数据也许不会直接显示，但我们可以分析一下这些数据。这里用到的技术叫做双聚类分析。</p>
<div class="highlight-default"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="k">import</span> <span class="n">SpectralCoclustering</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">SpectralCoclustering</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">visGrid</span><span class="p">)</span>

<span class="n">fit_data</span> <span class="o">=</span> <span class="n">visGrid</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">row_labels_</span><span class="p">)]</span>
<span class="n">fit_data</span> <span class="o">=</span> <span class="n">fit_data</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">column_labels_</span><span class="p">)]</span>

<span class="n">annot_lookup_sorted</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">row_labels_</span><span class="p">):</span>
    <span class="n">annot_lookup_sorted</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Genre_ID_to_name</span><span class="p">[</span><span class="n">nr_ids</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>

<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">fit_data</span><span class="p">,</span> <span class="n">xticklabels</span><span class="o">=</span><span class="n">annot_lookup_sorted</span><span class="p">,</span> <span class="n">yticklabels</span><span class="o">=</span><span class="n">annot_lookup_sorted</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;After biclustering; rearranged to show biclusters&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/bicluster.png" src="../_images/bicluster.png" />
<p>请看上图，“正方形”或者说一组电影类型自动出现了！</p>
<p>直观来看，犯罪，科幻，悬疑，动作，戏剧，惊悚等类型同时出现，另一方面，浪漫，科幻，家庭，音乐，冒险等类型同事出现。</p>
<p>这很有直观意义，对吧？</p>
<p>一个比较有挑战性的地方是戏剧类型具有广泛分布。它使得图中两大类集合高度重叠。如果我们使其与动作，惊悚等类型合并，那么几乎所有电影都会贴上这个标签。</p>
<p>根据以上内容的分析，我们可以将数据归类为“戏剧、动作、科幻、刺激（惊悚、犯罪、神秘）、振奋（冒险、幻想、动画、喜剧、浪漫、家庭）、恐怖、历史”等流派。</p>
<p>注意：这种分类是主观的，绝不是唯一的正确解决方案。也可以只保留原始标签，只排除那些没有足够数据的标签。这些技巧对于平衡数据集很重要，它允许我们增加或减少某些信号的强度，使得改进我们的推断成为可能：）</p>
</div>
<div class="section" id="id4">
<h2>有趣的问题<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<p>在这你可以尽情发挥想象力，应该会想出一些比我更好的问题。</p>
<dl class="docutils">
<dt>以下是一些我的想法：</dt>
<dd><ul class="first last simple">
<li>在一些电影中，哪些演员总是演某种类型，而有些演员却不拘泥于特定类型？</li>
<li>在最近几年中是否有某种流行趋势？</li>
<li>你能用音轨来识别电影的类型吗？</li>
<li>著名的浪漫类型演员的薪水是否比著名的动作演员高？</li>
<li>如果你看上映日期和流行度得分，哪种电影类型有更长的保质期？</li>
</ul>
</dd>
<dt>关于按种类拓展特征相关性的一些想法：</dt>
<dd><ul class="first last simple">
<li>标题的长度是否与电影类型有关？</li>
<li>恐怖片相较于浪漫和喜剧片，电影海报是否颜色更阴暗？</li>
<li>某些类型电影是否在一年中某些特殊档期发布更多？</li>
<li>RPG等级与电影类型有关么？</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="tmdb">
<h2>基于这个新的数据集，我们现在可以从TMDB抓取海报来作为我们的训练数据了！<a class="headerlink" href="#tmdb" title="永久链接至标题">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span class="c1"># 在开始之前，我们从pickle文件中读取数据以保持数据一致性！</span>
<span class="c1"># 我们现在对每个类型采样100部电影。有一个问题是由于排名是按流行程度排序的，因此可能会有重复。</span>
<span class="c1"># 我们需要移除已经采样的那些电影。</span>
<span class="n">movies</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">baseyear</span> <span class="o">=</span> <span class="mi">2017</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Starting pulling movies from TMDB. If you want to debug, uncomment the print command. This will take a while, please wait...&#39;</span><span class="p">)</span>
<span class="n">done_ids</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">g_id</span> <span class="ow">in</span> <span class="n">nr_ids</span><span class="p">:</span>
    <span class="c1">#print(&#39;Pulling movies for genre ID &#39;+g_id)</span>
    <span class="n">baseyear</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.themoviedb.org/3/discover/movie?api_key=&#39;</span> <span class="o">+</span> <span class="n">api_key</span>
        <span class="n">url</span> <span class="o">+=</span> <span class="s1">&#39;&amp;language=en-US&amp;sort_by=popularity.desc&amp;year=&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">baseyear</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">+=</span> <span class="s1">&#39;&amp;with_genres=&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">g_id</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&amp;page=&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

        <span class="n">dataDict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">movies</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">dataDict</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">])</span>
    <span class="n">done_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">g_id</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pulled movies for genres - &quot;</span><span class="o">+</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">done_ids</span><span class="p">))</span>
<span class="c1">#Pulled movies for genres - 12</span>
</pre></div>
</div>
<p>现在开始从TMDB获取电影数据。如果你想调试可以将那条打印语句取消注释。这会运行一段时间，请耐心等待。。。</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">f6</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;movies_for_posters&quot;</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
<span class="n">movies</span><span class="o">=</span><span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f6</span><span class="p">)</span>
<span class="n">f6</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>让我们去除列表中那些重复数据。</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">movie_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">movies</span><span class="p">]</span>
<span class="nb">print</span> <span class="s2">&quot;originally we had &quot;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">movie_ids</span><span class="p">),</span><span class="s2">&quot; movies&quot;</span>
<span class="n">movie_ids</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">movie_ids</span><span class="p">)</span>
<span class="nb">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">movie_ids</span><span class="p">)</span>
<span class="n">seen_before</span><span class="o">=</span><span class="p">[]</span>
<span class="n">no_duplicate_movies</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">movies</span><span class="p">)):</span>
    <span class="n">movie</span><span class="o">=</span><span class="n">movies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="nb">id</span><span class="o">=</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">seen_before</span><span class="p">:</span>
        <span class="k">continue</span>
<span class="c1">#         print &quot;Seen before&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">seen_before</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
        <span class="n">no_duplicate_movies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">movie</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;After removing duplicates we have &quot;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">no_duplicate_movies</span><span class="p">),</span> <span class="s2">&quot; movies&quot;</span>
</pre></div>
</div>
<p>originally we had  1670  movies
1608
After removing duplicates we have  1608  movies</p>
<p>同时，我们删除那些没有海报的电影！</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">poster_movies</span><span class="o">=</span><span class="p">[]</span>
<span class="n">counter</span><span class="o">=</span><span class="mi">0</span>
<span class="n">movies_no_poster</span><span class="o">=</span><span class="p">[]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total movies : &quot;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">movies</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Started downloading posters...&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">movie</span> <span class="ow">in</span> <span class="n">movies</span><span class="p">:</span>
    <span class="nb">id</span><span class="o">=</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
    <span class="n">title</span><span class="o">=</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">counter</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Downloaded first. Code is working fine. Please wait, this will take quite some time...&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">counter</span><span class="o">%</span><span class="mi">300</span><span class="o">==</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">counter</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span> <span class="s2">&quot;Done with &quot;</span><span class="p">,</span><span class="n">counter</span><span class="p">,</span><span class="s2">&quot; movies!&quot;</span>
        <span class="nb">print</span> <span class="s2">&quot;Trying to get poster for &quot;</span><span class="p">,</span><span class="n">title</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">grab_poster_tmdb</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
        <span class="n">poster_movies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">movie</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
            <span class="n">grab_poster_tmdb</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
            <span class="n">poster_movies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">movie</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">movies_no_poster</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">movie</span><span class="p">)</span>
    <span class="n">counter</span><span class="o">+=</span><span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done with all the posters!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>(‘Total movies : ‘, 1670)
Started downloading posters…
Downloaded first. Code is working fine. Please wait, this will take quite some time…
Done with  300  movies!
Trying to get poster for  Gravity
Done with  600  movies!
Trying to get poster for  Zombieland
Done with  900  movies!
Trying to get poster for  The Substitute
Done with  1200  movies!
Trying to get poster for  Decoys
Done with  1500  movies!
Trying to get poster for  Lost and Delirious
Done with all the posters!</p>
<div class="highlight-default"><div class="highlight"><pre><span class="nb">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">movies_no_poster</span><span class="p">)</span>
<span class="nb">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">poster_movies</span><span class="p">)</span>
</pre></div>
</div>
<p>170
1500</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">f</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;poster_movies.pckl&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">poster_movies</span><span class="o">=</span><span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span class="n">f</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;no_poster_movies.pckl&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">movies_no_poster</span><span class="o">=</span><span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>恭喜，我们已经完成了信息爬取！</p>
</div>
<div class="section" id="id5">
<h2>基于离散信息建立数据集！<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h2>
<p>这个任务很简单但是非常重要。基本上这将构建整个项目的基础。鉴于你可以在我提供的框架中自由构建自己的项目，你必须做出许多决定来完成你自己版本的项目。</p>
<p>当我们处理分类问题时，我们需要根据手头的数据做出两个决定：</p>
<blockquote>
<div><ul class="simple">
<li>我们想要预测什么，也就是我们的 Y 是什么？</li>
<li>我们用什么特征去预测这个 Y ，也就是我们应该用什么作为 X ？</li>
</ul>
</div></blockquote>
<p>有很多不同的选项，由你来决定什么是最好的。我将以我的版本为例，但你必须思考一下然后想出一个你认为最好的版本！</p>
<p>作为举例，这里有很多方式构建 Y，仍然拿类型预测问题来说：</p>
<blockquote>
<div><ul class="simple">
<li>假设每个电影都有多种类型，这就变成了一个多标签分类问题。比方说，一个电影可以同时是动作类，恐怖类和探险类。也就是说，每部电影可以有多个分类。</li>
<li>利用我们在第一节学到的双聚类分析生成类型组，这样每个电影就只有一个类型了。这样，问题就简化成了多类问题。比方说某个电影拥有这样的类型-刺激的，或是恐怖的，或是历史的。每个电影就只有一个分类。</li>
</ul>
</div></blockquote>
<p>为了实现这个目的，我将从上面的第一种情况开始-即多标签分类问题。</p>
<p>类似地，为了设计我们的输入特性，即X，您可以选择您认为有意义的任何特性，例如，电影的导演可能是流派的良好预测器。或者，他们可以选择使用PCA等算法设计的任何特性。鉴于IMDB、TMDB和维基百科等替代资源的丰富性，有很多可用的选项。这里要有创意！</p>
<p>另一件需要注意的重要事情是，在这样做时，我们还必须在途中做出许多更小的实现决策。例如，我们将包括哪些流派？我们要包括哪些电影？所有这些都是开放式的！</p>
</div>
<div class="section" id="id6">
<h2>我的实现<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h2>
<p>实现步骤-</p>
<blockquote>
<div><ul class="simple">
<li>如上所述问题被简化为一个多标签问题</li>
<li>我们将尝试预测一部电影关联的多种类型，这将作为我们的Y</li>
<li>我们使用两个不同的类型作为 X – 文本和图片</li>
<li>对文本部分–被用来预测类型的输入特征使用的是电影情节，可以从TMDB获取的数据中’overview’属性得到。这将作为我们的X</li>
<li>对图片部分–我们使用爬取的电影海报图片作为我们的X</li>
</ul>
</div></blockquote>
<p>注意：我们将首先看一些传统的机器学习模型，这些模型在最近兴起的神经网络和深度学习之前很流行。对电影海报图像进行类型预测，我之所以避免使用这种方法是因为在不使用深度学习的情况下，传统的机器学习模型不再被用来特征提取（前面都详细讨论过，不要害怕术语）。对于用电影概述来预测电影类型的问题，我们将同时使用传统模型和深度学习模型。</p>
<p>现在，我们开始建立我们的 X 和 Y ！</p>
<p>首先，我们筛选出那些有概述的电影。接下来的步骤是用来解释为什么数据清洗很重要的很好的案例！</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">movies_with_overviews</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">no_duplicate_movies</span><span class="p">)):</span>
    <span class="n">movie</span><span class="o">=</span><span class="n">no_duplicate_movies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="nb">id</span><span class="o">=</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
    <span class="n">overview</span><span class="o">=</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;overview&#39;</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">overview</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">movies_with_overviews</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">movie</span><span class="p">)</span>

<span class="nb">len</span><span class="p">(</span><span class="n">movies_with_overviews</span><span class="p">)</span>
</pre></div>
</div>
<p>1595</p>
<p>现在，我们把这些电影的类型存储在列表中，后面我们会把他们转化为布尔向量。</p>
<p>布尔向量表示法是机器学习中存储/表示数据的一种常见且重要的方法。本质上，它是将具有n个可能值的分类变量简化为n个布尔变量的一种方法。什么意思呢？比方说，[(1,3),(4)]这个列表表示样本A有两个标签1和3,而样本B有一个标签4。对每个样本来说，对于每个可能的标签，表示法简化为如果它具有该标签那么用1表示，如果没有该标签那么用0表示。上述列表的布尔表示法版本是-</p>
<p>[(1,0,1,0),(0,0,0,1)]</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c1"># genres=np.zeros((len(top1000_movies),3))</span>
<span class="n">genres</span><span class="o">=</span><span class="p">[]</span>
<span class="n">all_ids</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">movies_with_overviews</span><span class="p">)):</span>
    <span class="n">movie</span><span class="o">=</span><span class="n">movies_with_overviews</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="nb">id</span><span class="o">=</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
    <span class="n">genre_ids</span><span class="o">=</span><span class="n">movie</span><span class="p">[</span><span class="s1">&#39;genre_ids&#39;</span><span class="p">]</span>
    <span class="n">genres</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">genre_ids</span><span class="p">)</span>
    <span class="n">all_ids</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">genre_ids</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="k">import</span> <span class="n">MultiLabelBinarizer</span>
<span class="n">mlb</span><span class="o">=</span><span class="n">MultiLabelBinarizer</span><span class="p">()</span>
<span class="n">Y</span><span class="o">=</span><span class="n">mlb</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">genres</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span class="n">genres</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>[28, 12, 35, 10749]</p>
<div class="highlight-default"><div class="highlight"><pre><span class="nb">print</span> <span class="n">Y</span><span class="o">.</span><span class="n">shape</span>
<span class="nb">print</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>(1595, 20)
[327 234 220 645 222 438 404 138 45 440 233 133 242 196 135 232 256 80 23 25]</p>
<div class="highlight-default"><div class="highlight"><pre><span class="nb">len</span><span class="p">(</span><span class="n">list_of_genres</span><span class="p">)</span>
</pre></div>
</div>
<p>19</p>
<p>这很有趣，如果你还记得的话，我们只有19个类型标签。但是得出 Y 的结果是 1666,20 ,而它应该是 1666,19 ，因为我们只有19个种类？我们来看看怎么回事。</p>
<p>让我们找出那些不属于我们原始类型列表中的类型ID！</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c1"># Create a tmdb genre object!</span>
<span class="n">genres</span><span class="o">=</span><span class="n">tmdb</span><span class="o">.</span><span class="n">Genres</span><span class="p">()</span>
<span class="c1"># the list() method of the Genres() class returns a listing of all genres in the form of a dictionary.</span>
<span class="n">list_of_genres</span><span class="o">=</span><span class="n">genres</span><span class="o">.</span><span class="n">list</span><span class="p">()[</span><span class="s1">&#39;genres&#39;</span><span class="p">]</span>
<span class="n">Genre_ID_to_name</span><span class="o">=</span><span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">list_of_genres</span><span class="p">)):</span>
    <span class="n">genre_id</span><span class="o">=</span><span class="n">list_of_genres</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
    <span class="n">genre_name</span><span class="o">=</span><span class="n">list_of_genres</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
    <span class="n">Genre_ID_to_name</span><span class="p">[</span><span class="n">genre_id</span><span class="p">]</span><span class="o">=</span><span class="n">genre_name</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">all_ids</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Genre_ID_to_name</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
      <span class="nb">print</span> <span class="n">i</span>
</pre></div>
</div>
<p>10769</p>
<p>这个类型ID并不是我们查询TMDB获取所有可能的类型得到的。我们现在怎么办？我们不能忽略所有包含此类型的样本。但是如果你向前看你会看到许多这样的样本。所以我google了一下又看了他们的文档发现这个ID对应的类型是’Foreign’。因此我们把它加入到我们自己定义的字典中。像这样的问题在机器学习中很常见，当我们遇到时需要调查并纠正过来。我们总是要决定哪些要保留，如何保存等等。</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">Genre_ID_to_name</span><span class="p">[</span><span class="mi">10769</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;Foreign&quot;</span> <span class="c1">#Adding it to the dictionary</span>
<span class="nb">len</span><span class="p">(</span><span class="n">Genre_ID_to_name</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
<p>20</p>
<p>现在我们来建立 X 矩阵也就是输入特征！之前说过，我们会使用电影概述作为我们的输入向量！我们来看一个例子！</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">sample_movie</span><span class="o">=</span><span class="n">movies_with_overviews</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="n">sample_overview</span><span class="o">=</span><span class="n">sample_movie</span><span class="p">[</span><span class="s1">&#39;overview&#39;</span><span class="p">]</span>
<span class="n">sample_title</span><span class="o">=</span><span class="n">sample_movie</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
<span class="nb">print</span> <span class="s2">&quot;The overview for the movie&quot;</span><span class="p">,</span><span class="n">sample_title</span><span class="p">,</span><span class="s2">&quot; is - </span><span class="se">\n\n</span><span class="s2">&quot;</span>
<span class="nb">print</span> <span class="n">sample_overview</span>
</pre></div>
</div>
<p>The overview for the movie Doctor Strange  is -</p>
<p>After his career is destroyed, a brilliant but arrogant surgeon gets a new lease on life when a sorcerer takes him under his wing and trains him to defend the world against evil.</p>
</div>
<div class="section" id="id7">
<h2>我们如何在矩阵中存储电影概述？<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h2>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../section_5/index.html" class="btn btn-neutral float-right" title="第五章" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="第四章" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; 版权所有 2018, tiberius.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>